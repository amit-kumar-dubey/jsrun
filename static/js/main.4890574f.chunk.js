(window.webpackJsonprunjs=window.webpackJsonprunjs||[]).push([[0],{104:function(e,t,n){},114:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(57),i=n.n(c),o=(n(95),n(8)),u=n.n(o),s=n(12),l=n(15),m=n(124),f=n(125),h=n(119),p=r.a.createContext(null),d="github-user";function b(){return v.apply(this,arguments)}function v(){return(v=Object(s.a)(u.a.mark(function e(){var t,n,a,r,c,i,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem(d))){e.next=5;break}return e.abrupt("return",JSON.parse(t));case 5:if(n=window.location.href.match(/\?code=(.*)/)&&window.location.href.match(/\?code=(.*)/)[1]){e.next=8;break}return e.abrupt("return",null);case 8:return e.prev=8,e.next=11,fetch("https://pqsq24y7vb.execute-api.us-east-1.amazonaws.com/github/authenticate?code="+n);case 11:return a=e.sent,e.next=14,a.json();case 14:return r=e.sent,c=r.access_token,e.next=18,fetch("https://api.github.com/user",{headers:{Authorization:"token ".concat(c)}});case 18:if(!((i=e.sent).status>400)){e.next=21;break}throw new Error("Unauthorized");case 21:return e.t0=Object,e.next=24,i.json();case 24:return e.t1=e.sent,e.t2={token:c},o=e.t0.assign.call(e.t0,e.t1,e.t2),localStorage.setItem(d,JSON.stringify(Object.assign(o))),e.abrupt("return",o);case 31:return e.prev=31,e.t3=e.catch(8),e.abrupt("return",null);case 34:case"end":return e.stop()}},e,null,[[8,31]])}))).apply(this,arguments)}var j=r.a.memo(function(){var e=Object(a.useContext)(p);return e?r.a.createElement(m.a,{src:e.avatar_url,style:{height:"40px"}}):r.a.createElement(f.a,{href:"https://github.com/login/oauth/authorize?client_id=5baaa09a82442f96fb0d&scope=gist&redirect_uri=https://jsrun.dev",label:"Log in ",icon:r.a.createElement(h.a,null)})}),O=n(122),w=n(126),g=n(127),E=r.a.memo(function(e){var t=e.gist,n=e.selectGist;return r.a.createElement(O.a,{pad:"small",key:t.id},r.a.createElement(w.a,null,t.description||Object.keys(t.files)[0]),Object.values(t.files).filter(function(e){return"JavaScript"===e.language}).map(function(e){return Object.assign({},e,{id:t.id})}).map(function(e,t){return r.a.createElement(g.a,{margin:"small",key:e.filename+t,hoverIndicator:!0,onClick:function(){return n(e)}},r.a.createElement(w.a,null,e.filename))}))}),x=r.a.memo(function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],i=(Object(a.useContext)(p)||{}).token;return Object(a.useEffect)(function(){function e(){return(e=Object(s.a)(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.github.com/gists",{headers:{Authorization:"token ".concat(i)}});case 2:return t=e.sent,e.t0=c,e.next=6,t.json();case 6:e.t1=e.sent,(0,e.t0)(e.t1);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[i]),n&&n.filter(function(e){return Object.keys(e.files).length>0&&Object.values(e.files).some(function(e){return"JavaScript"===e.language})}).map(function(e){return r.a.createElement(E,{key:e.id,gist:e,selectGist:function(){}})})}),k=n(34),y=(n(104),n(35)),C=n(123),S=n(73),N=n(121),z=n(72),J=n(20);function A(){var e=Object(k.a)(["\n    flex-grow: 2;\n    overflow: auto;\n  "]);return A=function(){return e},e}function I(){var e=Object(k.a)(["\n    width: ","px;\n    height: calc(100vh - ","px);\n    overflow: hidden;\n    visibility: ","\n  "]);return I=function(){return e},e}function U(){var e=Object(k.a)(["\n    height: calc(100vh - ","px);\n    top: ","px;\n    width: 100%;\n    display: flex;\n    align-items: stretch;\n    overflow: hidden;\n  "]);return U=function(){return e},e}var W=r.a.memo(function(e){var t=e.Aside,n=e.Main,c=e.User,i=(Object(a.useContext)(p)||{}).token,o=Object(a.useState)(!0),u=Object(l.a)(o,2),s=u[0],m=u[1],f=Object(y.a)(U(),50,50),h=Object(y.a)(I(),i&&s?250:0,50,s?"visible":"hidden"),d=Object(y.a)(A());return r.a.createElement(a.Fragment,null,r.a.createElement(C.a,null,r.a.createElement(S.a,null,r.a.createElement(N.a,{onClick:function(){return m(!s)},icon:"folder-close",minimal:!0,active:s,disabled:!i},"Files"),r.a.createElement(z.a,null)),r.a.createElement(S.a,{align:J.a.RIGHT},r.a.createElement(c,null))),r.a.createElement("section",{className:f},i&&r.a.createElement(t,{className:h}),r.a.createElement(n,{className:d})))}),G=n(74),_=n(75),q=n(78),B=n(76),F=n(25),H=n(79),M=n(77),P=n.n(M),R=(n(111),n(113),n(120)),$=function(e){function t(e){var n;return Object(G.a)(this,t),(n=Object(q.a)(this,Object(B.a)(t).call(this,e))).iframe=void 0,n.state={content:"// Open dev tools to see the output\t\n console.log('Hello World');"},n.run=n.run.bind(Object(F.a)(n)),n.updateCode=n.updateCode.bind(Object(F.a)(n)),n}return Object(H.a)(t,e),Object(_.a)(t,[{key:"updateCode",value:function(e){this.setState({content:e})}},{key:"run",value:function(){this.iframe.contentWindow.eval(this.state.content)}},{key:"componentWillUpdate",value:function(){var e=Object(s.a)(u.a.mark(function e(t,n){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(a=t.externalContent)&&a!==this.state.content&&this.setState({content:a});case 2:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(P.a,{mode:"javascript",theme:"tomorrow",onChange:this.updateCode,name:"js-editor",value:this.state.content,focus:!0,editorProps:{$blockScrolling:!0},width:"100%",commands:[{name:"Execute",bindKey:{win:"Ctrl-Enter",mac:"Command-Enter"},exec:this.run}]}),r.a.createElement(g.a,{onClick:this.run,primary:!0,icon:r.a.createElement(R.a,null),label:"Run"}),r.a.createElement("iframe",{title:"dummy",style:{display:"none"},ref:function(t){return e.iframe=t}}," "))}}]),t}(a.Component),K=r.a.memo(function(e){var t=e.selectedGist,n=(Object(a.useContext)(p)||{}).token,c=Object(a.useState)(null),i=Object(l.a)(c,2),o=i[0],m=i[1];return Object(a.useEffect)(function(){function e(){return(e=Object(s.a)(u.a.mark(function e(){var a,r,c;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t.id&&n)){e.next=16;break}return e.prev=1,e.next=4,fetch("https://api.github.com/gists/"+t.id,{headers:{Authorization:"token ".concat(n)}});case 4:if(!((a=e.sent).status>400)){e.next=7;break}throw new Error("Unauthorized");case 7:return e.next=9,a.json();case 9:r=e.sent,c=r.files[t.filename],m(c.content),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(1);case 16:case"end":return e.stop()}},e,null,[[1,14]])}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t,n]),r.a.createElement($,{externalContent:o})}),L=r.a.memo(function(e){var t=e.className;return r.a.createElement("aside",{className:t},r.a.createElement(x,null))}),T=r.a.memo(function(e){var t=e.className;return r.a.createElement("main",{className:t},r.a.createElement(K,null))}),D=r.a.memo(function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)(function(){function e(){return(e=Object(s.a)(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,b();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]),r.a.createElement(p.Provider,{value:n},r.a.createElement(W,{Aside:L,Main:T,User:j}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},90:function(e,t,n){e.exports=n(114)},95:function(e,t,n){}},[[90,1,2]]]);
//# sourceMappingURL=main.4890574f.chunk.js.map